# RUN: llc -run-pass=shrink-wrap2 %s -enable-shrink-wrap2=true -debug-only=shrink-wrap2 -o /dev/null 2>&1 | FileCheck %s
# REQUIRES: asserts
# Check that we don't save on a branch that never returns.
#CHECK: **** Analysing foo
#CHECK-NEXT: BB#2 uses : %RBX
---
name:            foo
body:             |
  bb.0:
    successors: %bb.1, %bb.2
    liveins: %edi

    NOOP implicit-def %eflags
    JNE_1 %bb.2, implicit killed %eflags
    JMP_1 %bb.1

  bb.1:
    RET 0

  bb.2:
    successors: %bb.3

    %rbx = MOV64ri 30

  bb.3:
    successors: %bb.3

    JMP_1 %bb.3
...
#CHECK-NEXT: Remove uses from unterminable BB#2
#CHECK-NOT: Shrink-wrapping results
#CHECK-NOT: Saves
